# Quant Bootcamp · 3 Weeks from TA → Backtesting → Risk

面向对象：**有 Python/ML 经验、金融基础较弱**的学习者。  
目标：3 周（21 天）内完成从**技术分析指标** → **策略实现与回测** → **优化与风险管理** → **小型 Capstone** 的端到端流程。  
> 代码风格：仅用 `pandas/numpy/matplotlib/yfinance/backtrader`；自建极简公共库 `src/miniqlib.py`（对齐、成本、净值、绩效等）。

---

## 🎯 学习完成后你将能
- 系统化使用 TA 指标（MA/EMA、MACD、RSI、布林带、ATR、Donchian、OBV）。
- 实现并评估 **趋势/均值回归/突破/动量** 的基础策略（**t+1 执行**、含**交易成本/滑点**）。
- 使用 **Backtrader** 进行事件驱动回测，得到一致的绩效与交易统计报表。
- 进行 **小网格/随机搜索** 与 **Walk-Forward** 样本外验证，识别与缓解过拟合。
- 应用 **仓位管理与风险约束**（target vol、最大单笔风险、回撤阈值），并构建多策略/多资产组合。
- 以一份 **Capstone**（端到端复现 + 报告）收尾。

---

## 📁 仓库结构（建议）


---

## 📏 统一评估口径
- 指标：**CAGR、年化波动、Sharpe、Sortino、最大回撤、胜率、盈亏比、年化换手、成本占比**
- 约束：**t 生成、t+1 执行**；**包含交易成本/滑点**；与**买入持有/行业 ETF**对比
- 图表：**净值曲线、回撤曲线、月度收益热力图、交易分布、参数敏感曲线**

---

## 🗓️ 三周路线图（21 天）

### Week 1｜技术指标系统化 & 基本策略（Day 1–7）
**目标**：打牢指标与数据脚手架；完成 4 类基础策略的**向量化回测**并统一评估口径。
- **Day 1** 指标复盘与脚手架：MA/EMA/RSI/BB/ATR/MACD/Donchian/OBV 接口与可视化；导出 `day1_indicators.parquet`。
- **Day 2** 趋势跟踪：SMA/EMA/MACD，含成本与 t+1 执行；与基准对比。
- **Day 3** 均值回归：布林带/RSI + ATR 止损；关注盈亏比、胜率、持仓天数。
- **Day 4** 突破策略：Donchian + ATR 追踪止损；检查极端行情回撤。
- **Day 5** 动量策略：时间序列动量（可选：行业 ETF 小篮子）。
- **Day 6** 过滤与目标波动率：成交量过滤、波动率过滤、target vol；对比换手/成本影响。
- **Day 7** 周结：选 1–2 个**基线策略**；列出问题清单与下一步计划。

**Week 1 里程碑**：  
✅ 4 类策略的向量化回测（含成本/对齐）  
✅ 统一绩效报表与图表模板  
✅ 基线策略候选（1–2 个）

---

### Week 2｜Backtrader 深入 & 严谨回测（Day 8–14）
**目标**：将基线策略迁移至 **Backtrader**，补齐撮合/佣金/滑点细节；建立分析器报表、参数搜索与 **Walk-Forward**。
- **Day 8** Backtrader 基础与一致性校验：事件驱动 vs 向量化结果**基本重合**。
- **Day 9** 分析器与报表：收益/波动/Sharpe/最大回撤、盈亏分布、持仓时长；输出 `tearsheet`。
- **Day 10** 参数网格/随机搜索：≤20/50 组；观察是否存在**平坦高原**。
- **Day 11** Walk-Forward：滚动优化→样本外测试；合并 OOS 曲线与 OOS 指标表（目标：OOS Sharpe ≥ 0.6× IS）。
- **Day 12** 交易规则精炼：固定止损、ATR 止损、追踪止损、时间止盈/止损。
- **Day 13** 仓位管理与敞口约束：target vol、最大单笔风险、最大敞口、杠杆上限。
- **Day 14** 周结与策略卡片：一页纸说明逻辑/参数/胜负手/风险点/适用市场。

**Week 2 里程碑**：  
✅ Backtrader 版基线策略（与向量化**对齐**）  
✅ 参数搜索与 Walk-Forward 的**样本外**结果  
✅ “策略卡片”（一页纸）

---

### Week 3｜优化、防过拟合、组合与系统化（Day 15–21）
**目标**：在不牺牲稳健性的前提下优化；识别并缓解过拟合；做多策略/多资产组合；完成 **Capstone**。
- **Day 15** 优化目标：`Sharpe - λ*Turnover - μ*MaxDD`；给出 λ/μ 灵敏度与选择依据。
- **Day 16** 过拟合识别：参数扰动、收益洗牌、分段稳健性（牛/熊/震荡）。
- **Day 17** 多因子/多过滤器组合（非 ML 版）：趋势分数 + 均值回归分数 + 波动/成交量过滤 → 仓位映射。
- **Day 18** 风险指标与风控看板：CAGR/Vol/Sharpe/Sortino/MaxDD/Calmar/VaR/ES（历史法）。
- **Day 19** 仓位管理实践：目标波动率、分层入场/金字塔加仓、资金曲线自适应缩放。
- **Day 20** 多策略/多资产组合：等权/风险平价/简化 MVO；月度再平衡；综合成本。
- **Day 21** Capstone：一键复现实验 + ≤10 页报告（包含失败场景与风控对策）。

**Week 3 里程碑**：  
✅ 优化与稳健性证据（非单点最优）  
✅ 多策略/多资产组合结果  
✅ Capstone 代码与报告

---

## 🔧 miniqlib（公共库的最小接口建议）
- **时序与成本**：`shift_exec`, `turnover`, `apply_cost`
- **净值与绩效**：`equity`, `drawdown`, `max_drawdown`, `perf`
- **常用指标**：`sma`, `ema`, `rsi`, `bbands`, `atr`, `macd`, `donchian`, `obv`
> 原则：**最小可用**、命名清晰、无复杂封装；滚动窗口带来的前几行 NaN 交由上层统一处理。

---

## ✅ 每日产出与验收（模板）
- **产出**：Notebook（含“目的/金融含义” Markdown）、指标表、图表、数据导出（如 `.parquet`）  
- **验收**：  
  - t+1 执行、含成本/滑点  
  - 与基准对比、与向量化/Backtrader 对齐  
  - 若涉及样本外：OOS 指标达标  
  - 图表与指标**可复现**，不依赖手动挑选片段

---

## 🗒️ 文档与报告
- 每周一份 **周总结**（1–2 页）：策略、参数、绩效、问题与下一步计划  
- 最终 **Capstone**：端到端说明与复现指引（数据→信号→回测→风控→组合→样本外→稳定性）

---

## 📄 License
建议 MIT（可在 `LICENSE` 中声明）。
